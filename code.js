
var characterProfiles = [
  {
    characterName: "Joiboy Nassus",
    characterImageURLString: "Joiboy.png",
    currentAct: "Act 1",
    characterSpecies: "Troll",
    characterBloodColor: "Violet",
    characterUserName: "aquaticDreamer",
    characterHemotyping: "#6a006a",
    characterTypingQuirk: 'All "w" are capitalised, "o" are always typed as "ô". Says "Dood" instead of "Dude"',
    characterGender: "Male",
    characterAge: "8 sweeps",
    characterHeight: 1.65,
    characterSign: "Aquapio",
    characterClass: "Knight",
    characterAspect: "Light",
    characterDreamself: "Prospit",
    characterPlanet: "Land of Neon and Gears",
    characterConsorts: "None",
    characterDenizen: "Unknown",
    characterStrifeDeck: "Gunkind, Knifekind",
    characterSylladexModi: "Puzzle",
    characterLusus: "Leviathan",
    characterStats_PowerLevel: 5.5,
    characterStats_Intelligence: 6,
    characterStats_Wisdom: 5,
    characterStats_Vitality: 5,
    characterStats_Speed: 7,
    characterStats_Precision: 2,
    characterStats_Charisma: 4.5,
    characterNotes: "",
    titleColor: "white"
  },
  {
    characterName: "Tyrous Markas (Act 1)",
    characterImageURLString: "Tyrous Act 1.png",
    currentAct: "Act 1",
    characterSpecies: "Troll",
    characterBloodColor: "Candy Red Mutant",
    characterUserName: "alignedAffiliation",
    characterHemotyping: "#ff0000",
    characterTypingQuirk: 'All "N" and "O" are capitalised',
    characterGender: "Male",
    characterAge: "6 sweeps",
    characterHeight: 1.44,
    characterSign: "Lecer",
    characterClass: "Mage",
    characterAspect: "Blood",
    characterDreamself: "Prospit",
    characterPlanet: "Land of Hunt and Gemstones",
    characterConsorts: "None",
    characterDenizen: "Unknown",
    characterStrifeDeck: "Whipkind",
    characterSylladexModi: "None",
    characterLusus: "None",
    characterStats_PowerLevel: 6,
    characterStats_Intelligence: 5,
    characterStats_Wisdom: 5,
    characterStats_Vitality: 6,
    characterStats_Speed: 6,
    characterStats_Precision: 5,
    characterStats_Charisma: 4.5,
    characterNotes: "",
    titleColor: "black"
  },
  {
    characterName: "Tyrous Aiolia (Act 2)",
    characterImageURLString: "Tyrous Act 2.png",
    currentAct: "Act 2",
    characterSpecies: "Troll",
    characterBloodColor: "Olive",
    characterUserName: "ominousOblique",
    characterHemotyping: "#416600",
    characterTypingQuirk: 'All "N" and "O" are capitalised',
    characterGender: "Male",
    characterAge: "6 sweeps",
    characterHeight: 1.44,
    characterSign: "Lecer",
    characterClass: "Mage",
    characterAspect: "Blood",
    characterDreamself: "Prospit",
    characterPlanet: "Land of Hunt and Gemstones",
    characterConsorts: "None",
    characterDenizen: "Unknown",
    characterStrifeDeck: "Whipkind",
    characterSylladexModi: "Weight (it allows you to carry as many items as you want in multiple cards or even in a single one, no limitation on size or any of that. The only limitation is on how much you can carry, you have a weight limit set by the system equation, of which is: “Own weight*2 + 20 kilos”)",
    characterLusus: "None",
    characterStats_PowerLevel: 6,
    characterStats_Intelligence: 5,
    characterStats_Wisdom: 6,
    characterStats_Vitality: 6,
    characterStats_Speed: 6,
    characterStats_Precision: 5,
    characterStats_Charisma: 6,
    characterNotes: "",
    titleColor: "black"
  },
  {
    characterName: "Stella Capela",
    characterImageURLString: "Stella.png",
    currentAct: "Act 1",
    characterSpecies: "Troll",
    characterBloodColor: "Teal",
    characterUserName: "ditzyServant",
    characterHemotyping: "#008282",
    characterTypingQuirk: 'All "V" are capitalised',
    characterGender: "Female",
    characterAge: "7 sweeps",
    characterHeight: 1.50,
    characterSign: "Liblo",
    characterClass: "Maid",
    characterAspect: "Heart",
    characterDreamself: "Prospit",
    characterPlanet: "Land of Tea and Marble",
    characterConsorts: "None",
    characterDenizen: "Unknown",
    characterStrifeDeck: "RocketLauncherkind, Shovelkind, pankind",
    characterSylladexModi: "Drawing",
    characterLusus: "Eagle-Fox",
    characterStats_PowerLevel: 5,
    characterStats_Intelligence: 2,
    characterStats_Wisdom: 5,
    characterStats_Vitality: 6,
    characterStats_Speed: 7,
    characterStats_Precision: 6,
    characterStats_Charisma: 6,
    characterNotes: "",
    titleColor: "black"
  },
  {
    characterName: "Garzim Gyrauu",
    characterImageURLString: "Garzim.png",
    currentAct: "Act 1",
    characterSpecies: "Troll",
    characterBloodColor: "Purple",
    characterUserName: "serpentineMaster",
    characterHemotyping: "#2b0057",
    characterTypingQuirk: 'All "S" are capitalised. Replaces Hey with Honk. Uses a lot of clown emoticons',
    characterGender: "Female",
    characterAge: "7.3 sweeps",
    characterHeight: 1.75,
    characterSign: "Caprittanius",
    characterClass: "Thief",
    characterAspect: "Void",
    characterDreamself: "Prospit",
    characterPlanet: "Land of Treasures and Compass",
    characterConsorts: "None",
    characterDenizen: "Unknown",
    characterStrifeDeck: "Rapier/swordkind",
    characterSylladexModi: "Selection Wheel",
    characterLusus: "Snake",
    characterStats_PowerLevel: 6,
    characterStats_Intelligence: 6,
    characterStats_Wisdom: 5,
    characterStats_Vitality: 6,
    characterStats_Speed: 6.5,
    characterStats_Precision: 5,
    characterStats_Charisma: 5,
    characterNotes: "",
    titleColor: "white"
  },
  {
    characterName: "Lustra Fotuna",
    characterImageURLString: "Lustra.png",
    currentAct: "Act 1",
    characterSpecies: "Troll",
    characterBloodColor: "Gold",
    characterUserName: "dualEucharists",
    characterHemotyping: "#a1a100",
    characterTypingQuirk: 'All "i" are duplicated, "is" is replaced with "=" and she has "(=)" as a prefix',
    characterGender: "Female",
    characterAge: "6.5 sweeps",
    characterHeight: 1.20,
    characterSign: "Gemza",
    characterClass: "Princess",
    characterAspect: "Mind",
    characterDreamself: "Derse main dreamer (Two dreamselves)",
    characterPlanet: "Land of Rivers and Rain",
    characterConsorts: "None",
    characterDenizen: "Unknown",
    characterStrifeDeck: "Yoyokind",
    characterSylladexModi: "Array 2.0 (She can set Macros to take and place from specific cards or perform specific actions)",
    characterLusus: "Snail",
    characterStats_PowerLevel: 5,
    characterStats_Intelligence: 6,
    characterStats_Wisdom: 6,
    characterStats_Vitality: 4,
    characterStats_Speed: 4,
    characterStats_Precision: 5,
    characterStats_Charisma: 5.5,
    characterNotes: "",
    titleColor: "white"
  },
  {
    characterName: "Serina Golfos",
    characterImageURLString: "Serina.png",
    currentAct: "Act 1",
    characterSpecies: "Troll",
    characterBloodColor: "Fuchsia",
    characterUserName: "underminedEmperess",
    characterHemotyping: "#77003c",
    characterTypingQuirk: 'Replaces "H" with ")(". Has "--E" as a prefiz and "3--" as a post',
    characterGender: "Female",
    characterAge: "8.3 sweeps",
    characterHeight: 1.60,
    characterSign: "Pimini",
    characterClass: "Seer",
    characterAspect: "Doom",
    characterDreamself: "Derse",
    characterPlanet: "Land of Sand and Wind",
    characterConsorts: "None",
    characterDenizen: "Unknown",
    characterStrifeDeck: "Tridentkind",
    characterSylladexModi: "Minecraft",
    characterLusus: "Unknown",
    characterStats_PowerLevel: 5.5,
    characterStats_Intelligence: 6,
    characterStats_Wisdom: 6,
    characterStats_Vitality: 7,
    characterStats_Speed: 6,
    characterStats_Precision: 6,
    characterStats_Charisma: 5,
    characterNotes: "",
    titleColor: "white"
  },
  {
    characterName: "Heivan Nazeus",
    characterImageURLString: "Heivan.png",
    currentAct: "Act 1",
    characterSpecies: "Troll",
    characterBloodColor: "Rust",
    characterUserName: "gloriousPersona",
    characterHemotyping: "#a10000",
    characterTypingQuirk: 'All lower case. Has } as a prefix and { as a post',
    characterGender: "Male",
    characterAge: "6.8 sweeps",
    characterHeight: 1.55,
    characterSign: "Arrius",
    characterClass: "Heir",
    characterAspect: "Hope",
    characterDreamself: "Derse",
    characterPlanet: "Land of Light and Colossus",
    characterConsorts: "None",
    characterDenizen: "Unknown",
    characterStrifeDeck: "Hookkind",
    characterSylladexModi: "Alphabetic",
    characterLusus: "Piglet",
    characterStats_PowerLevel: 4.5,
    characterStats_Intelligence: 4,
    characterStats_Wisdom: 3,
    characterStats_Vitality: 6,
    characterStats_Speed: 4,
    characterStats_Precision: 3,
    characterStats_Charisma: 2,
    characterNotes: "",
    titleColor: "white"
  },
  {
    characterName: "Skaank Sabats",
    characterImageURLString: "Skaank.png",
    currentAct: "Act 1",
    characterSpecies: "Troll",
    characterBloodColor: "Bronze",
    characterUserName: "maskedVisionary",
    characterHemotyping: "#a15000",
    characterTypingQuirk: 'Tavros quirk and has "|`" as a prefix and "´|" as a post',
    characterGender: "Male",
    characterAge: "6 sweeps",
    characterHeight: 1.30,
    characterSign: "Tauriborn",
    characterClass: "Page",
    characterAspect: "Rage",
    characterDreamself: "Derse",
    characterPlanet: "Land of Heat and Obsidian",
    characterConsorts: "None",
    characterDenizen: "Unknown",
    characterStrifeDeck: "Clubkind, Percussionkind",
    characterSylladexModi: "Stack",
    characterLusus: "Rhyno/Bull",
    characterStats_PowerLevel: 2,
    characterStats_Intelligence: 4,
    characterStats_Wisdom: 3,
    characterStats_Vitality: 6,
    characterStats_Speed: 3,
    characterStats_Precision: 2.5,
    characterStats_Charisma: 5,
    characterNotes: "",
    titleColor: "white"
  },
  {
    characterName: "Mike Kirlia",
    characterImageURLString: "Mike.png",
    currentAct: "Act 1",
    characterSpecies: "Human",
    characterBloodColor: "Human Red",
    characterUserName: "armoredMagician",
    characterHemotyping: "#89CFF0",
    characterTypingQuirk: 'Everything is properly typed, proper ponctuation',
    characterGender: "Male",
    characterAge: "16 years",
    characterHeight: 1.65,
    characterSign: "Aquapio",
    characterClass: "Witch",
    characterAspect: "Light",
    characterDreamself: "Prospit",
    characterPlanet: "Land of Frost and Faries",
    characterConsorts: "None",
    characterDenizen: "Unknown",
    characterStrifeDeck: "Spearkind, Tridentkind, Wandkind and MagicGloveskind",
    characterSylladexModi: "Library (Able to take groups of cards and separate them into 'Books', user is able to give it a label, index code anda description. And those Books are able to be put into shelves that have index code and titles. User is able to retrive any item from them)",
    characterLusus: "Aunt Kirlia",
    characterStats_PowerLevel: 4,
    characterStats_Intelligence: 5,
    characterStats_Wisdom: 4,
    characterStats_Vitality: 4,
    characterStats_Speed: 5,
    characterStats_Precision: 4,
    characterStats_Charisma: 5,
    characterNotes: "",
    titleColor: "black"
  },
  {
    characterName: "Hush Legion",
    characterImageURLString: "Hush.png",
    currentAct: "Act 1",
    characterSpecies: "Human",
    characterBloodColor: "Human Red",
    characterUserName: "urbanBard",
    characterHemotyping: "#4f0015",
    characterTypingQuirk: 'No captalization',
    characterGender: "Male",
    characterAge: "16 years",
    characterHeight: 1.60,
    characterSign: "Sagiries",
    characterClass: "Rogue",
    characterAspect: "Time",
    characterDreamself: "Derse",
    characterPlanet: "Land of Haze and Symphony",
    characterConsorts: "None",
    characterDenizen: "Unknown",
    characterStrifeDeck: "Axekind, Wandkind",
    characterSylladexModi: "List Search (Similar to Array, but you can search through the cards)",
    characterLusus: "Grandpa Joel",
    characterStats_PowerLevel: 4,
    characterStats_Intelligence: 5,
    characterStats_Wisdom: 4,
    characterStats_Vitality: 4,
    characterStats_Speed: 4,
    characterStats_Precision: 3,
    characterStats_Charisma: 5,
    characterNotes: "",
    titleColor: "white"
  }
];

/*
The stats score are:
1 - Low               | F
2 - Low+              | E
3 - Mid-              | D
4 - Mid               | C
5 - Mid+              | B
6 - High              | A
7 - High+             | S
8 - Advanced          | SS
9 - Mastered          | SSS
10 - Godlike & Beyond | MAX
*/

var levelRanks = ["F", "E", "D", "C", "B", "A", "S", "SS", "SSS", "MAX"];

var profilePicFolderPath = "Images/Profile Pics/";
var signPicFolderPath = "Images/Signs/";

function GetRank(input){
  var output = "NULL";
  for (var i = 0; i < levelRanks.length; i++) {
    if(input < 1){
      output = "FFF";
      break;
    } else if(input > 10){
      output = levelRanks[9];
      break;
    }else{
      if(input >= i + 1 && input < i + 2){
        output = levelRanks[i];
        break;
      }
    }

  }
  return output;
}

//console.log(GetRank(5.5));

//document.getElementById("imageTest").style.width = "5%";
//document.getElementById("imageTest").style.height = "5%";

function CloneFunction(){

  var itm;
  for (var i = 0; i < characterProfiles.length; i++) {
    itm = document.getElementById("divParent");
    var cln = itm.cloneNode(true);

    SetupCharacter(cln, i);
    document.getElementById("divClone").appendChild(cln);
  }
  itm.remove();
}

CloneFunction();

function SetupCharacter(target, index){
  var child1 = target.children[1].children[2].children[0];
  var child2 = target.children[1].children[2].children[1];

//  console.log(target.children[1].children[0].id);

  for (var i = 0; i < target.children[1].children.length; i++) {
    if(target.children[1].children[i].id == "profileImageID") target.children[1].children[i].src = profilePicFolderPath + characterProfiles[index].characterImageURLString;
    if(target.children[1].children[i].id == "signImageID") target.children[1].children[i].src = signPicFolderPath + characterProfiles[index].characterImageURLString;

  }

  target.children[0].innerHTML = characterProfiles[index].characterName;

   for (var i = 0; i < child1.children.length; i++) {

     if(child1.children[i].id == "label_N_S_B"){
       child1.children[i].innerHTML = "Name: " + characterProfiles[index].characterName +
       " | Species: " + characterProfiles[index].characterSpecies +
       " | Blood Color: " + characterProfiles[index].characterBloodColor;
     }

     if(child1.children[i].id == "label_Gender") child1.children[i].innerHTML = "Gender: " + characterProfiles[index].characterGender;
     if(child1.children[i].id == "label_Age") child1.children[i].innerHTML = "Age: " + characterProfiles[index].characterAge;
     if(child1.children[i].id == "label_Height") child1.children[i].innerHTML = "Height: " + characterProfiles[index].characterHeight + "m";

     if(child1.children[i].id == "label_Un_Tc") {
       child1.children[i].innerHTML =
       "Username: " + characterProfiles[index].characterUserName +
       " | Text Color: " + characterProfiles[index].characterHemotyping;
     }

     if(child1.children[i].id == "label_TypingQ") child1.children[i].innerHTML = "Typing Quirk: " + characterProfiles[index].characterTypingQuirk;

     if(child1.children[i].id == "label_S_C_A_D"){
       child1.children[i].innerHTML =
       "Sign: " + characterProfiles[index].characterSign +
       " | Class: " + characterProfiles[index].characterClass +
       " | Aspect: " + characterProfiles[index].characterAspect +
       " | Dreamself: " + characterProfiles[index].characterDreamself;
     }

     if(child1.children[i].id == "label_P_C_D"){
       child1.children[i].innerHTML =
       "Planet: " + characterProfiles[index].characterPlanet +
       " | Consorts: " + characterProfiles[index].characterConsorts +
       " | Denizen: " + characterProfiles[index].characterDenizen;
     }

     var guardianString = "Lusus: ";

     if(characterProfiles[index].characterSpecies == "Human"){
       guardianString = "Guardian: ";
     } else if(characterProfiles[index].characterSpecies == "Troll"){
       guardianString = "Lusus: ";
     }

     if(child1.children[i].id == "label_StrifeDeck") child1.children[i].innerHTML = "Strife Deck: " + characterProfiles[index].characterStrifeDeck;
     if(child1.children[i].id == "label_Sylladex") child1.children[i].innerHTML = "Sylladex Modi: " + characterProfiles[index].characterSylladexModi;
     if(child1.children[i].id == "label_Lusus_Guardian") child1.children[i].innerHTML = guardianString + characterProfiles[index].characterLusus;
     if(child1.children[i].id == "label_Notes") child1.children[i].innerHTML = "Notes: " + characterProfiles[index].characterNotes;
   }

   for (var i = 0; i < child2.children.length; i++) {
     if(child2.children[i].id == "label_STAT_PL") child2.children[i].innerHTML = "Power Level: " + GetRank(characterProfiles[index].characterStats_PowerLevel) + " (" + characterProfiles[index].characterStats_PowerLevel + ")";
     if(child2.children[i].id == "label_STAT_INT") child2.children[i].innerHTML = "Intelligence: " +  GetRank(characterProfiles[index].characterStats_Intelligence) + " (" +characterProfiles[index].characterStats_Intelligence + ")";
     if(child2.children[i].id == "label_STAT_WIS") child2.children[i].innerHTML = "Wisdom: " +  GetRank(characterProfiles[index].characterStats_Wisdom) + " (" +characterProfiles[index].characterStats_Wisdom + ")";
     if(child2.children[i].id == "label_STAT_VIT") child2.children[i].innerHTML = "Vitality: " +  GetRank(characterProfiles[index].characterStats_Vitality) + " (" +characterProfiles[index].characterStats_Vitality + ")";
     if(child2.children[i].id == "label_STAT_SPD") child2.children[i].innerHTML = "Speed: " +  GetRank(characterProfiles[index].characterStats_Speed) + " (" +characterProfiles[index].characterStats_Speed + ")";
     if(child2.children[i].id == "label_STAT_PCS") child2.children[i].innerHTML = "Precision: " +  GetRank(characterProfiles[index].characterStats_Precision) + " (" +characterProfiles[index].characterStats_Precision + ")";
     if(child2.children[i].id == "label_STAT_CHA") child2.children[i].innerHTML = "Charisma: " +  GetRank(characterProfiles[index].characterStats_Charisma) + " (" +characterProfiles[index].characterStats_Charisma + ")";
   }

   //Custom CSS

   target.children[0].style.backgroundColor = characterProfiles[index].characterHemotyping;
   target.children[0].style.color = characterProfiles[index].titleColor;
   //console.log(target.children[1].children[0]);

   var ctx = target.children[1].children[2].children[1].children[16].children[0].getContext('2d');

   ctx.canvas.parentNode.style.height = '300px';
   ctx.canvas.parentNode.style.width = '300px';

   var statPowerLevel = characterProfiles[index].characterStats_PowerLevel;
   var statIntelligence = characterProfiles[index].characterStats_Intelligence;
   var statWisdom = characterProfiles[index].characterStats_Wisdom;
   var statVitality = characterProfiles[index].characterStats_Vitality;
   var statSpeed = characterProfiles[index].characterStats_Speed;
   var statPrecision = characterProfiles[index].characterStats_Precision;
   var statCharisma = characterProfiles[index].characterStats_Charisma;

   var bgColor = characterProfiles[index].characterHemotyping;

   var myChart = new Chart(ctx, {
       type: 'radar',
       data: {
           labels: ['Power Level', 'Intelligence', 'Wisdom', 'Vitality', 'Speed', 'Precision', 'Charisma'],
           datasets: [{
               label: 'Status',
               data: [statPowerLevel, statIntelligence, statWisdom, statVitality, statSpeed, statPrecision, statCharisma],
               backgroundColor: [
                   hexToRgbA(bgColor, 0.2)
               ],
               borderColor: [
                   hexToRgbA(bgColor, 1),
                   hexToRgbA(bgColor, 1),
                   hexToRgbA(bgColor, 1),
                   hexToRgbA(bgColor, 1),
                   hexToRgbA(bgColor, 1),
                   hexToRgbA(bgColor, 1),
                   hexToRgbA(bgColor, 1)
               ],
               borderWidth: 3
           }]
       },
       options: {
         scale: {
           angleLines: {
             display: false
           },
           ticks: {
             suggestedMin: 1,
             suggestedMax: 10
           }
         }
       }
   });
}

 var ctx2 = document.getElementById("myChart2").getContext('2d');

 ctx2.canvas.parentNode.style.width = '500px';
 ctx2.canvas.parentNode.style.height = '500px';

 var myChart2 = new Chart(ctx2, {
     type: 'radar',
     data: {
         datasets: [],
       labels: ['Power Level', 'Intelligence', 'Wisdom', 'Vitality', 'Speed', 'Precision', 'Charisma']
     },
     options: {
          scale: {
            angleLines: {
              display: false
            },
            ticks: {
              suggestedMin: 1,
              suggestedMax: 10
            }
          }
     }

 });

function addData(chart, label, color, data, order) {
  var color1 = hexToRgbA(characterProfiles[i].characterHemotyping, 0.2);
   var color2 = hexToRgbA(characterProfiles[i].characterHemotyping, 1);
   chart.data.datasets.push({
     label: label,
      backgroundColor: color1,
      data: data,
      order: order,
      borderColor: color2,
      fill: false
    });
    chart.update();
}

//set all character to compare
  for (var i = 0; i < characterProfiles.length; i++) {
    var statsArray = [
      characterProfiles[i].characterStats_PowerLevel,
      characterProfiles[i].characterStats_Intelligence,
      characterProfiles[i].characterStats_Wisdom,
      characterProfiles[i].characterStats_Vitality,
      characterProfiles[i].characterStats_Speed,
      characterProfiles[i].characterStats_Precision,
      characterProfiles[i].characterStats_Charisma
    ];

    addData(myChart2, characterProfiles[i].characterName, characterProfiles[i].characterHemotyping, statsArray, i);
    //addData(heightChart, characterProfiles[i].characterName, characterProfiles[i].characterHemotyping, characterProfiles[i].characterHeight, i);
    //labels.push(characterProfiles[i].characterName);
  }

  function hexToRgbA(hex, alpha){
      var c;
      if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex)){
          c= hex.substring(1).split('');
          if(c.length== 3){
              c= [c[0], c[0], c[1], c[1], c[2], c[2]];
          }
          c= '0x'+c.join('');
          return 'rgba('+[(c>>16)&255, (c>>8)&255, c&255].join(',')+','+ alpha + ')';
      }
      throw new Error('Bad Hex');
  }

  //Show Story acts
  function ShowAllCharacters(){
    console.log("Showing all Characters");
  }

  function ShowAct1Characters(){
    console.log("Showing Act 1 Characters");
  }

  function ShowAct2Characters(){
    console.log("Showing Act 2 Characters");
  }

  //document.getElementById("canvasDiv_Comparison").style.display = "none";

//Collapse system
var coll = document.getElementsByClassName("collapsible");
var i;

for (var i = 0; i < coll.length; i++) {
  coll[i].addEventListener("click", function(){
    this.classList.toggle("active");
    var content = this.nextElementSibling;
    if(content.style.display === "block"){
      content.style.display = "none";
    }else{
      content.style.display = "block";
    }
  });
}
